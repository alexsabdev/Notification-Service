/* notification-service -v1.0.0 - 2016-01-04 */
var nsModule=angular.module("notification-service",[]);nsModule.service("Notification",["$rootScope","$compile","$http","$timeout",function(a,b,c,d){var e=a.$new();e.options={delay:9e4,limit:5,baseUrl:"http://localhost:3000/"},this.setOptions=function(a){if(!angular.isObject(a))throw new Error("Options should be an object!");e.options=angular.extend({},e.options,a)},e.buffer=[],e.isDisplayed=!1,e.kill=function(a){e.buffer.splice(e.buffer.indexOf(a),1),0===e.buffer.length&&(e.isDisplayed=!1,angular.element(document.getElementById("notification-area")).remove())},e.sendResponse=function(a,b){c({url:e.options.baseUrl+"confirm",method:"POST",data:{id:a.id,from:a.from,result:b}}).then(function(a){console.log("POST success")},function(a){console.log("POST error")}),e.kill(a)};var f='<ul id="notification-area"><li id="ns-{{item.id}}" class="ns-alert-{{item.category}} notification" ng-repeat="item in buffer|limitTo:-options.limit"><span class="ns-close" ng-click="kill(item)">&times;</span><p class="ns-title"><strong>ID {{item.id}}: {{item.header}}</strong></p><p class="ns-content">{{ item.content }}</p><button class="ns-btn ns-btn-xs ns-btn-{{item.category}}" ng-show="item.type!==\'note\'" ng-click="sendResponse(item,1)">OK</button><button class="ns-btn ns-btn-xs ns-btn-{{item.category}}" ng-show="(item.type!==\'note\')&&(item.type!==\'ok_confirm\')" ng-click="sendResponse(item,0)">Cancel</button></li></ul>',g=function(a){e.buffer.push(a),e.isDisplayed||(angular.element(document.getElementsByTagName("body")).append(b(f)(e)),e.isDisplayed=!0),d(function(){e.buffer.splice(e.buffer.indexOf(a),1),0===e.buffer.length&&(e.isDisplayed=!1,angular.element(document.getElementById("notification-area")).remove())},e.options.delay)};this.notify=function(a){g(a)},this.getFromServer=function(){c({url:e.options.baseUrl+"list",method:"GET"}).then(function(a){console.log("GET success");for(var b=a.data,c=0;c<b.length;c++)g(b[c])},function(a){console.log("GET error")})}}]);